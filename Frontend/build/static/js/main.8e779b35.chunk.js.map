{"version":3,"sources":["components/Layout/Layout.js","components/Backdrop/Backdrop.js","components/Toolbar/Toolbar.js","components/Navigation/MobileToggle/MobileToggle.js","components/Logo/Logo.js","components/Navigation/NavigationItems/NavigationItems.js","components/Navigation/MainNavigation/MainNavigation.js","components/Navigation/MobileNavigation/MobileNavigation.js","components/Button/Button.js","components/Modal/Modal.js","components/ErrorHandler/ErrorHandler.js","components/Feed/Post/Post.js","components/Form/Input/Input.js","components/Form/Input/FilePicker.js","components/Image/Image.js","util/validators.js","util/image.js","components/Feed/FeedEdit/FeedEdit.js","components/Paginator/Paginator.js","components/Loader/Loader.js","pages/Feed/Feed.js","pages/Feed/SinglePost/SinglePost.js","pages/Auth/Auth.js","pages/Auth/Login.js","pages/Auth/Signup.js","App.js","index.js"],"names":["layout","props","React","createElement","Fragment","className","header","mobileNav","children","backdrop","ReactDOM","createPortal","open","join","onClick","document","getElementById","toolbar","mobileToggle","onOpen","logo","navItems","id","text","link","auth","navigationItems","concat","_toConsumableArray","filter","item","isAuth","map","key","mobile","NavLink","to","exact","onChoose","onLogout","mainNavigation","MobileToggle","onOpenMobileNav","Logo","NavigationItems","mobileNavigation","onChooseItem","button","Link","design","mode","disabled","loading","type","modal","title","Button","onCancelModal","onAcceptModal","acceptEnabled","isLoading","errorHandler","error","Backdrop","onHandle","Modal","message","post","author","date","onStartEdit","onDelete","input","label","htmlFor","control","valid","touched","required","value","placeholder","onChange","e","target","files","onBlur","rows","filePicker","image","style","backgroundImage","imageUrl","backgroundSize","contain","backgroundPosition","left","trim","length","config","isValid","min","max","email","test","generateBase64FromImage","imageFile","reader","FileReader","promise","Promise","resolve","reject","onload","result","onerror","err","readAsDataURL","POST_FORM","validators","content","FeedEdit","_Component","_getPrototypeOf2","_this","_classCallCheck","this","_len","arguments","args","Array","_key","_possibleConstructorReturn","_getPrototypeOf","call","apply","state","postForm","formIsValid","imagePreview","postInputChangeHandler","then","b64","setState","catch","prevState","_step","_iterator","_createForOfIteratorHelper","s","n","done","validator","f","updatedForm","_objectSpread","_defineProperty","inputName","inputBlurHandler","cancelPostChangeHandler","onCancelEdit","acceptPostChangeHandler","onFinishEdit","_inherits","_createClass","prevProps","editing","selectedPost","imagePath","Input","bind","FilePicker","Image","Component","paginator","currentPage","onPrevious","lastPage","onNext","loader","Feed","isEditing","posts","totalPosts","editPost","status","postPage","postsLoading","editLoading","addPost","updatedPosts","pop","unshift","updatePost","updatedPostIndex","findIndex","p","_id","loadPosts","direction","page","fetch","headers","Authorization","token","res","Error","json","resData","totalItems","catchError","statusUpdateHandler","event","preventDefault","method","Content-Type","body","JSON","stringify","console","log","newPostHandler","startEditPostHandler","postId","find","cancelEditHandler","finishEditHandler","postData","formData","FormData","append","url","creator","createdAt","statusInputChangeHandler","deletePostHandler","_this2","name","openSocket","on","data","action","_this3","ErrorHandler","textAlign","color","onSubmit","class","marginTop","Loader","Paginator","Math","ceil","Post","Date","toLocaleDateString","SinglePost","match","params","Login","loginForm","password","inputChangeHandler","Auth","onLogin","Signup","signupForm","onSignup","App","showBackdrop","showMobileNav","userId","authLoading","mobileNavHandler","isOpen","backdropClickHandler","logoutHandler","localStorage","removeItem","loginHandler","authData","content-type","setItem","expiryDate","getTime","toISOString","setAutoLogout","signupHandler","history","replace","milliseconds","setTimeout","getItem","remainingMilliseconds","routes","Switch","Route","path","render","LoginPage","Object","assign","SignupPage","Redirect","FeedPage","SinglePostPage","Layout","Toolbar","MainNavigation","MobileNavigation","withRouter","BrowserRouter"],"mappings":"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","file":"static/js/main.8e779b35.chunk.js","sourcesContent":["import React, { Fragment } from 'react';\r\n\r\nimport './Layout.css';\r\n\r\nconst layout = props => (\r\n  <Fragment>\r\n    <header className=\"main-header\">{props.header}</header>\r\n    {props.mobileNav}\r\n    <main className=\"content\">{props.children}</main>\r\n  </Fragment>\r\n);\r\n\r\nexport default layout;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './Backdrop.css';\r\n\r\nconst backdrop = props =>\r\n  ReactDOM.createPortal(\r\n    <div\r\n      className={['backdrop', props.open ? 'open' : ''].join(' ')}\r\n      onClick={props.onClick}\r\n    />,\r\n    document.getElementById('backdrop-root')\r\n  );\r\n\r\nexport default backdrop;\r\n","import React from 'react';\r\n\r\nimport './Toolbar.css';\r\n\r\nconst toolbar = props => (\r\n    <div className=\"toolbar\">\r\n       {props.children}\r\n    </div>\r\n);\r\n\r\nexport default toolbar;","import React from 'react';\r\n\r\nimport './MobileToggle.css';\r\n\r\nconst mobileToggle = props => (\r\n  <button className=\"mobile-toggle\" onClick={props.onOpen}>\r\n    <span className=\"mobile-toggle__bar\" />\r\n    <span className=\"mobile-toggle__bar\" />\r\n    <span className=\"mobile-toggle__bar\" />\r\n  </button>\r\n);\r\n\r\nexport default mobileToggle;\r\n","import React from 'react';\r\n\r\nimport './Logo.css';\r\n\r\nconst logo = props => <h1 className=\"logo\">SHAREKNY</h1>;\r\n\r\nexport default logo;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport './NavigationItems.css';\r\n\r\nconst navItems = [\r\n  { id: 'feed', text: 'Feed', link: '/', auth: true },\r\n  { id: 'login', text: 'Login', link: '/', auth: false },\r\n  { id: 'signup', text: 'Signup', link: '/signup', auth: false }\r\n];\r\n\r\nconst navigationItems = props => [\r\n  ...navItems.filter(item => item.auth === props.isAuth).map(item => (\r\n    <li\r\n      key={item.id}\r\n      className={['navigation-item', props.mobile ? 'mobile' : ''].join(' ')}\r\n    >\r\n      <NavLink to={item.link} exact onClick={props.onChoose}>\r\n        {item.text}\r\n      </NavLink>\r\n    </li>\r\n  )),\r\n  props.isAuth && (\r\n    <li className=\"navigation-item\" key=\"logout\">\r\n      <button onClick={props.onLogout}>Logout</button>\r\n    </li>\r\n  )\r\n];\r\n\r\nexport default navigationItems;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport MobileToggle from '../MobileToggle/MobileToggle';\r\nimport Logo from '../../Logo/Logo';\r\nimport NavigationItems from '../NavigationItems/NavigationItems';\r\n\r\nimport './MainNavigation.css';\r\n\r\nconst mainNavigation = props => (\r\n  <nav className=\"main-nav\">\r\n    <MobileToggle onOpen={props.onOpenMobileNav} />\r\n    <div className=\"main-nav__logo\">\r\n      <NavLink to=\"/\">\r\n        <Logo />\r\n      </NavLink>\r\n    </div>\r\n    <div className=\"spacer\" />\r\n    <ul className=\"main-nav__items\">\r\n      <NavigationItems isAuth={props.isAuth} onLogout={props.onLogout} />\r\n    </ul>\r\n  </nav>\r\n);\r\n\r\nexport default mainNavigation;\r\n","import React from 'react';\r\n\r\nimport NavigationItems from '../NavigationItems/NavigationItems';\r\nimport './MobileNavigation.css';\r\n\r\nconst mobileNavigation = props => (\r\n  <nav className={['mobile-nav', props.open ? 'open' : ''].join(' ')}>\r\n    <ul\r\n      className={['mobile-nav__items', props.mobile ? 'mobile' : ''].join(' ')}\r\n    >\r\n      <NavigationItems\r\n        mobile\r\n        onChoose={props.onChooseItem}\r\n        isAuth={props.isAuth}\r\n        onLogout={props.onLogout}\r\n      />\r\n    </ul>\r\n  </nav>\r\n);\r\n\r\nexport default mobileNavigation;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './Button.css';\r\n\r\nconst button = props =>\r\n  !props.link ? (\r\n    <button\r\n      className={[\r\n        'button',\r\n        `button--${props.design}`,\r\n        `button--${props.mode}`\r\n      ].join(' ')}\r\n      onClick={props.onClick}\r\n      disabled={props.disabled || props.loading}\r\n      type={props.type}\r\n    >\r\n      {props.loading ? 'Loading...' : props.children}\r\n    </button>\r\n  ) : (\r\n    <Link\r\n      className={[\r\n        'button',\r\n        `button--${props.design}`,\r\n        `button--${props.mode}`\r\n      ].join(' ')}\r\n      to={props.link}\r\n    >\r\n      {props.children}\r\n    </Link>\r\n  );\r\n\r\nexport default button;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport Button from '../Button/Button';\r\nimport './Modal.css';\r\n\r\nconst modal = props =>\r\n  ReactDOM.createPortal(\r\n    <div className=\"modal\">\r\n      <header className=\"modal__header\">\r\n        <h1>{props.title}</h1>\r\n      </header>\r\n      <div className=\"modal__content\">{props.children}</div>\r\n      <div className=\"modal__actions\">\r\n        <Button design=\"danger\" mode=\"flat\" onClick={props.onCancelModal}>\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          mode=\"raised\"\r\n          onClick={props.onAcceptModal}\r\n          disabled={!props.acceptEnabled}\r\n          loading={props.isLoading}\r\n        >\r\n          Accept\r\n        </Button>\r\n      </div>\r\n    </div>,\r\n    document.getElementById('modal-root')\r\n  );\r\n\r\nexport default modal;\r\n","import React, { Fragment } from 'react';\r\n\r\nimport Backdrop from '../Backdrop/Backdrop';\r\nimport Modal from '../Modal/Modal';\r\n\r\nconst errorHandler = props => (\r\n  <Fragment>\r\n    {props.error && <Backdrop onClick={props.onHandle} />}\r\n    {props.error && (\r\n      <Modal\r\n        title=\"An Error Occurred\"\r\n        onCancelModal={props.onHandle}\r\n        onAcceptModal={props.onHandle}\r\n        acceptEnabled\r\n      >\r\n        <p>{props.error.message}</p>\r\n      </Modal>\r\n    )}\r\n  </Fragment>\r\n);\r\n\r\nexport default errorHandler;\r\n","import React from 'react';\r\n\r\nimport Button from '../../Button/Button';\r\nimport './Post.css';\r\n// import Image from '../../Image/Image';\r\n\r\nconst post = props => (\r\n  <article className=\"post\">\r\n    <header className=\"post__header\">\r\n      <h3 className=\"post__meta\">\r\n        Posted by {props.author} on {props.date}\r\n      </h3>\r\n      <h1 className=\"post__title\">{props.title}</h1>\r\n    </header>\r\n    {/* <div className=\"post__image\">\r\n      <Image imageUrl={props.image} contain/>\r\n    </div>*/}\r\n    {/* <div className=\"post__content\">{props.content}</div>  */}\r\n    <div className=\"post__actions\">\r\n      <Button mode=\"flat\" link={props.id}>\r\n        View\r\n      </Button>\r\n      <Button mode=\"flat\" onClick={props.onStartEdit}>\r\n        Edit\r\n      </Button>\r\n      <Button mode=\"flat\" design=\"danger\" onClick={props.onDelete}>\r\n        Delete\r\n      </Button>\r\n    </div>\r\n  </article>\r\n);\r\n\r\nexport default post;\r\n","import React from 'react';\r\n\r\nimport './Input.css';\r\n\r\nconst input = props => (\r\n  <div className=\"input\">\r\n    {props.label && <label htmlFor={props.id}>{props.label}</label>}\r\n    {props.control === 'input' && (\r\n      <input\r\n        className={[\r\n          !props.valid ? 'invalid' : 'valid',\r\n          props.touched ? 'touched' : 'untouched'\r\n        ].join(' ')}\r\n        type={props.type}\r\n        id={props.id}\r\n        required={props.required}\r\n        value={props.value}\r\n        placeholder={props.placeholder}\r\n        onChange={e => props.onChange(props.id, e.target.value, e.target.files)}\r\n        onBlur={props.onBlur}\r\n      />\r\n    )}\r\n    {props.control === 'textarea' && (\r\n      <textarea\r\n        className={[\r\n          !props.valid ? 'invalid' : 'valid',\r\n          props.touched ? 'touched' : 'untouched'\r\n        ].join(' ')}\r\n        id={props.id}\r\n        rows={props.rows}\r\n        required={props.required}\r\n        value={props.value}\r\n        onChange={e => props.onChange(props.id, e.target.value)}\r\n        onBlur={props.onBlur}\r\n      />\r\n    )}\r\n  </div>\r\n);\r\n\r\nexport default input;\r\n","import React from 'react';\r\n\r\nimport './Input.css';\r\n\r\nconst filePicker = props => (\r\n  <div className=\"input\">\r\n    <label htmlFor={props.id}>{props.label}</label>\r\n    <input\r\n      className={[\r\n        !props.valid ? 'invalid' : 'valid',\r\n        props.touched ? 'touched' : 'untouched'\r\n      ].join(' ')}\r\n      type=\"file\"\r\n      id={props.id}\r\n      onChange={e => props.onChange(props.id, e.target.value, e.target.files)}\r\n      onBlur={props.onBlur}\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default filePicker;\r\n","import React from 'react';\r\n\r\nimport './Image.css';\r\n\r\nconst image = props => (\r\n  <div\r\n    className=\"image\"\r\n    style={{\r\n      backgroundImage: `url('${props.imageUrl}')`,\r\n      backgroundSize: props.contain ? 'contain' : 'cover',\r\n      backgroundPosition: props.left ? 'left' : 'center'\r\n    }}\r\n  />\r\n);\r\n\r\nexport default image;\r\n","export const required = value => value.trim() !== '';\r\n\r\nexport const length = config => value => {\r\n  let isValid = true;\r\n  if (config.min) {\r\n    isValid = isValid && value.trim().length >= config.min;\r\n  }\r\n  if (config.max) {\r\n    isValid = isValid && value.trim().length <= config.max;\r\n  }\r\n  return isValid;\r\n};\r\n\r\nexport const email = value =>\r\n  /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(\r\n    value\r\n  );\r\n","export const generateBase64FromImage = imageFile => {\r\n  const reader = new FileReader();\r\n  const promise = new Promise((resolve, reject) => {\r\n    reader.onload = e => resolve(e.target.result);\r\n    reader.onerror = err => reject(err);\r\n  });\r\n\r\n  reader.readAsDataURL(imageFile);\r\n  return promise;\r\n};\r\n","import React, { Component, Fragment } from 'react';\r\n\r\nimport Backdrop from '../../Backdrop/Backdrop';\r\nimport Modal from '../../Modal/Modal';\r\nimport Input from '../../Form/Input/Input';\r\nimport FilePicker from '../../Form/Input/FilePicker';\r\nimport Image from '../../Image/Image';\r\nimport { required, length } from '../../../util/validators';\r\nimport { generateBase64FromImage } from '../../../util/image';\r\n\r\nconst POST_FORM = {\r\n  title: {\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [required, length({ min: 5 })]\r\n  },\r\n  image: {\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [required]\r\n  },\r\n  content: {\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [required, length({ min: 5 })]\r\n  }\r\n};\r\n\r\nclass FeedEdit extends Component {\r\n  state = {\r\n    postForm: POST_FORM,\r\n    formIsValid: false,\r\n    imagePreview: null\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      this.props.editing &&\r\n      prevProps.editing !== this.props.editing &&\r\n      prevProps.selectedPost !== this.props.selectedPost\r\n    ) {\r\n      const postForm = {\r\n        title: {\r\n          ...prevState.postForm.title,\r\n          value: this.props.selectedPost.title,\r\n          valid: true\r\n        },\r\n        image: {\r\n          ...prevState.postForm.image,\r\n          value: this.props.selectedPost.imagePath,\r\n          valid: true\r\n        },\r\n        content: {\r\n          ...prevState.postForm.content,\r\n          value: this.props.selectedPost.content,\r\n          valid: true\r\n        }\r\n      };\r\n      this.setState({ postForm: postForm, formIsValid: true });\r\n    }\r\n  }\r\n\r\n  postInputChangeHandler = (input, value, files) => {\r\n    if (files) {\r\n      generateBase64FromImage(files[0])\r\n        .then(b64 => {\r\n          this.setState({ imagePreview: b64 });\r\n        })\r\n        .catch(e => {\r\n          this.setState({ imagePreview: null });\r\n        });\r\n    }\r\n    this.setState(prevState => {\r\n      let isValid = true;\r\n      for (const validator of prevState.postForm[input].validators) {\r\n        isValid = isValid && validator(value);\r\n      }\r\n      const updatedForm = {\r\n        ...prevState.postForm,\r\n        [input]: {\r\n          ...prevState.postForm[input],\r\n          valid: isValid,\r\n          value: files ? files[0] : value\r\n        }\r\n      };\r\n      let formIsValid = true;\r\n      for (const inputName in updatedForm) {\r\n        formIsValid = formIsValid && updatedForm[inputName].valid;\r\n      }\r\n      return {\r\n        postForm: updatedForm,\r\n        formIsValid: formIsValid\r\n      };\r\n    });\r\n  };\r\n\r\n  inputBlurHandler = input => {\r\n    this.setState(prevState => {\r\n      return {\r\n        postForm: {\r\n          ...prevState.postForm,\r\n          [input]: {\r\n            ...prevState.postForm[input],\r\n            touched: true\r\n          }\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  cancelPostChangeHandler = () => {\r\n    this.setState({\r\n      postForm: POST_FORM,\r\n      formIsValid: false\r\n    });\r\n    this.props.onCancelEdit();\r\n  };\r\n\r\n  acceptPostChangeHandler = () => {\r\n    const post = {\r\n      title: this.state.postForm.title.value,\r\n      image: this.state.postForm.image.value,\r\n      content: this.state.postForm.content.value\r\n    };\r\n    this.props.onFinishEdit(post);\r\n    this.setState({\r\n      postForm: POST_FORM,\r\n      formIsValid: false,\r\n      imagePreview: null\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return this.props.editing ? (\r\n      <Fragment>\r\n        <Backdrop onClick={this.cancelPostChangeHandler} />\r\n        <Modal\r\n          title=\"New Post\"\r\n          acceptEnabled={this.state.formIsValid}\r\n          onCancelModal={this.cancelPostChangeHandler}\r\n          onAcceptModal={this.acceptPostChangeHandler}\r\n          isLoading={this.props.loading}\r\n        >\r\n          <form>\r\n            <Input\r\n              id=\"title\"\r\n              label=\"Title\"\r\n              control=\"input\"\r\n              onChange={this.postInputChangeHandler}\r\n              onBlur={this.inputBlurHandler.bind(this, 'title')}\r\n              valid={this.state.postForm['title'].valid}\r\n              touched={this.state.postForm['title'].touched}\r\n              value={this.state.postForm['title'].value}\r\n            />\r\n            <FilePicker\r\n              id=\"image\"\r\n              label=\"Image\"\r\n              control=\"input\"\r\n              onChange={this.postInputChangeHandler}\r\n              onBlur={this.inputBlurHandler.bind(this, 'image')}\r\n              valid={this.state.postForm['image'].valid}\r\n              touched={this.state.postForm['image'].touched}\r\n            />\r\n            <div className=\"new-post__preview-image\">\r\n              {!this.state.imagePreview && <p>Please choose an image.</p>}\r\n              {this.state.imagePreview && (\r\n                <Image imageUrl={this.state.imagePreview} contain left />\r\n              )}\r\n            </div>\r\n            <Input\r\n              id=\"content\"\r\n              label=\"Content\"\r\n              control=\"textarea\"\r\n              rows=\"5\"\r\n              onChange={this.postInputChangeHandler}\r\n              onBlur={this.inputBlurHandler.bind(this, 'content')}\r\n              valid={this.state.postForm['content'].valid}\r\n              touched={this.state.postForm['content'].touched}\r\n              value={this.state.postForm['content'].value}\r\n            />\r\n          </form>\r\n        </Modal>\r\n      </Fragment>\r\n    ) : null;\r\n  }\r\n}\r\n\r\nexport default FeedEdit;\r\n","import React from 'react';\r\n\r\nimport './Paginator.css';\r\n\r\nconst paginator = props => (\r\n  <div className=\"paginator\">\r\n    {props.children}\r\n    <div className=\"paginator__controls\">\r\n      {props.currentPage > 1 && (\r\n        <button className=\"paginator__control\" onClick={props.onPrevious}>\r\n          Previous\r\n        </button>\r\n      )}\r\n      {props.currentPage < props.lastPage && (\r\n        <button className=\"paginator__control\" onClick={props.onNext}>\r\n          Next\r\n        </button>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default paginator;\r\n","import React from 'react';\r\n\r\nimport './Loader.css';\r\n\r\nconst loader = props => (\r\n  <div className=\"loader\">\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n  </div>\r\n);\r\n\r\nexport default loader;\r\n","import React, { Component, Fragment } from 'react';\r\nimport openSocket from 'socket.io-client';\r\n\r\nimport Post from '../../components/Feed/Post/Post';\r\nimport Button from '../../components/Button/Button';\r\nimport FeedEdit from '../../components/Feed/FeedEdit/FeedEdit';\r\nimport Input from '../../components/Form/Input/Input';\r\nimport Paginator from '../../components/Paginator/Paginator';\r\nimport Loader from '../../components/Loader/Loader';\r\nimport ErrorHandler from '../../components/ErrorHandler/ErrorHandler';\r\nimport './Feed.css';\r\n\r\nclass Feed extends Component {\r\n  state = {\r\n    isEditing: false,\r\n    posts: [],\r\n    totalPosts: 0,\r\n    editPost: null,\r\n    status: '',\r\n    postPage: 1,\r\n    postsLoading: true,\r\n    editLoading: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    fetch('https://socialnetwork-backend.up.railway.app/feed/status',{\r\n      headers: {\r\n        Authorization: 'Bearer ' + this.props.token\r\n      }\r\n    })\r\n      .then(res => {\r\n        if (res.status !== 200) {\r\n          throw new Error('Failed to fetch user status.');\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(resData => {\r\n        this.setState({ \r\n          status: resData.status,\r\n          name : resData.name\r\n        });\r\n      })\r\n      .catch(this.catchError);\r\n\r\n    this.loadPosts();\r\n    const socket = openSocket('https://socialnetwork-backend.up.railway.app');\r\n    socket.on('posts', data => {\r\n      if (data.action === 'create') {\r\n        this.addPost(data.post);\r\n      } else if (data.action === 'update'){\r\n        this.updatePost(data.post);\r\n      }else if (data.action === 'delete') {\r\n        this.loadPosts();\r\n      }\r\n    }); \r\n  }\r\n\r\n  addPost = post => {\r\n    this.setState(prevState => {\r\n      const updatedPosts = [...prevState.posts];\r\n      if (prevState.postPage === 1) {\r\n        if (prevState.posts.length >= 2) {\r\n          updatedPosts.pop();\r\n        }\r\n        updatedPosts.unshift(post);\r\n      }\r\n      return {\r\n        posts: updatedPosts,\r\n        totalPosts: prevState.totalPosts + 1\r\n      };\r\n    });\r\n  };\r\n\r\n  updatePost = post => {\r\n    this.setState(prevState => {\r\n      const updatedPosts = [...prevState.posts];\r\n      const updatedPostIndex = updatedPosts.findIndex(p => p._id === post._id);\r\n      if (updatedPostIndex > -1) {\r\n        updatedPosts[updatedPostIndex] = post;\r\n      }\r\n      return {\r\n        posts: updatedPosts\r\n      };\r\n    });\r\n  };\r\n\r\n  loadPosts = direction => {\r\n    if (direction) {\r\n      this.setState({ postsLoading: true, posts: [] });\r\n    }\r\n    let page = this.state.postPage;\r\n    if (direction === 'next') {\r\n      page++;\r\n      this.setState({ postPage: page });\r\n    }\r\n    if (direction === 'previous') {\r\n      page--;\r\n      this.setState({ postPage: page });\r\n    }\r\n    fetch('https://socialnetwork-backend.up.railway.app/feed/posts?page=' + page, {\r\n      headers: {\r\n        Authorization: 'Bearer ' + this.props.token,\r\n      }\r\n    })\r\n      .then(res => {\r\n        if (res.status !== 200) {\r\n          throw new Error('Failed to fetch posts.');\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(resData => {\r\n        this.setState({\r\n          posts: resData.posts.map(post =>{\r\n            return {\r\n              ...post,\r\n              imagePath: post.imageUrl\r\n            }\r\n          }),\r\n          totalPosts: resData.totalItems,\r\n          postsLoading: false\r\n        });\r\n      })\r\n      .catch(this.catchError);\r\n  };\r\n\r\n  statusUpdateHandler = event => {\r\n    event.preventDefault();\r\n    fetch('https://socialnetwork-backend.up.railway.app/feed/status', {\r\n      method: 'PATCH',\r\n      headers: {\r\n        Authorization: 'Bearer ' + this.props.token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        status: this.state.status\r\n      })\r\n    })\r\n    \r\n      .then(res => {\r\n        if (res.status !== 200 && res.status !== 201) {\r\n          throw new Error(\"Can't update status!\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(resData => {\r\n        console.log(resData);\r\n      })\r\n      .catch(this.catchError);\r\n  };\r\n\r\n  newPostHandler = () => {\r\n    this.setState({ isEditing: true });\r\n  };\r\n\r\n  startEditPostHandler = postId => {\r\n    this.setState(prevState => {\r\n      const loadedPost = { ...prevState.posts.find(p => p._id === postId) };\r\n\r\n      return {\r\n        isEditing: true,\r\n        editPost: loadedPost\r\n      };\r\n    });\r\n  };\r\n\r\n  cancelEditHandler = () => {\r\n    this.setState({ isEditing: false, editPost: null });\r\n  };\r\n\r\n  finishEditHandler = postData => {\r\n    this.setState({\r\n      editLoading: true\r\n    });\r\n    const formData = new FormData();\r\n    formData.append('title', postData.title);\r\n    formData.append('content', postData.content);\r\n    formData.append('image', postData.image);\r\n    let url = 'https://socialnetwork-backend.up.railway.app/feed/post';\r\n    let method = 'POST';\r\n    if (this.state.editPost) {\r\n      url = 'https://socialnetwork-backend.up.railway.app/feed/post/' + this.state.editPost._id;\r\n      method = 'PUT';\r\n    }\r\n\r\n    fetch(url, {\r\n      method: method,\r\n      body: formData,\r\n      headers: {\r\n        Authorization: 'Bearer ' + this.props.token\r\n      }\r\n    })\r\n      .then(res => {\r\n        if (res.status !== 200 && res.status !== 201) {\r\n          throw new Error('Creating or editing a post failed!');\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(resData => {\r\n        console.log(resData);\r\n        const post = {\r\n          _id: resData.post._id,\r\n          title: resData.post.title,\r\n          content: resData.post.content,\r\n          creator: resData.post.creator,\r\n          createdAt: resData.post.createdAt\r\n        };\r\n        this.setState(prevState => {\r\n          return {\r\n            isEditing: false,\r\n            editPost: null,\r\n            editLoading: false\r\n          };\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        this.setState({\r\n          isEditing: false,\r\n          editPost: null,\r\n          editLoading: false,\r\n          error: err\r\n        });\r\n      });\r\n  };\r\n\r\n  statusInputChangeHandler = (input, value) => {\r\n    this.setState({ status: value });\r\n  };\r\n\r\n  deletePostHandler = postId => {\r\n    this.setState({ postsLoading: true });\r\n    fetch('https://socialnetwork-backend.up.railway.app/feed/post/' + postId, {\r\n      method: 'DELETE',\r\n        headers: {\r\n          Authorization: 'Bearer ' + this.props.token,\r\n        }\r\n    })\r\n      .then(res => {\r\n        if (res.status !== 200 && res.status !== 201) {\r\n          throw new Error('Deleting a post failed!');\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(resData => {\r\n        console.log(resData);\r\n        this.setState(prevState => {\r\n          const updatedPosts = prevState.posts.filter(p => p._id !== postId);\r\n          return { posts: updatedPosts, postsLoading: false };\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        this.setState({ postsLoading: false });\r\n      });\r\n  };\r\n\r\n  errorHandler = () => {\r\n    this.setState({ error: null });\r\n  };\r\n\r\n  catchError = error => {\r\n    this.setState({ error: error });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <ErrorHandler error={this.state.error} onHandle={this.errorHandler} />\r\n        <FeedEdit\r\n          editing={this.state.isEditing}\r\n          selectedPost={this.state.editPost}\r\n          loading={this.state.editLoading}\r\n          onCancelEdit={this.cancelEditHandler}\r\n          onFinishEdit={this.finishEditHandler}\r\n        />\r\n        <section className=\"feed__status\">\r\n          {/* add username */}\r\n          <h3 style={{ textAlign: 'center', color: '#03123e' }}>Welcome {this.state.name}, What's on your mind!</h3>\r\n          <form onSubmit={this.statusUpdateHandler}>\r\n            <Input\r\n              type=\"text\"\r\n              class=\"status-input\"\r\n              placeholder=\"Your status\"\r\n              control=\"input\"\r\n              onChange={this.statusInputChangeHandler}\r\n              value={this.state.status}\r\n            />\r\n            <Button mode=\"flat\" type=\"submit\">\r\n              Update\r\n            </Button>\r\n          </form>\r\n        </section>\r\n        <section className=\"feed__control\">\r\n          <Button mode=\"raised\" design=\"accent\" onClick={this.newPostHandler}>\r\n            New Post\r\n          </Button>\r\n        </section>\r\n        <section className=\"feed\">\r\n          {this.state.postsLoading && (\r\n            <div style={{ textAlign: 'center', marginTop: '2rem' }}>\r\n              <Loader />\r\n            </div>\r\n          )}\r\n          {this.state.posts.length <= 0 && !this.state.postsLoading ? (\r\n            <p style={{ textAlign: 'center' }}>No posts found.</p>\r\n          ) : null}\r\n          {!this.state.postsLoading && (\r\n            <Paginator\r\n              onPrevious={this.loadPosts.bind(this, 'previous')}\r\n              onNext={this.loadPosts.bind(this, 'next')}\r\n              lastPage={Math.ceil(this.state.totalPosts / 2)}\r\n              currentPage={this.state.postPage}\r\n            >\r\n              {this.state.posts.map(post => (\r\n                <Post\r\n                  key={post._id}\r\n                  id={post._id}\r\n                  author={post.creator.name}\r\n                  date={new Date(post.createdAt).toLocaleDateString('en-US')}\r\n                  title={post.title}\r\n                  image={post.imageUrl}\r\n                  content={post.content}\r\n                  onStartEdit={this.startEditPostHandler.bind(this, post._id)}\r\n                  onDelete={this.deletePostHandler.bind(this, post._id)}\r\n                />\r\n              ))}\r\n            </Paginator>\r\n          )}\r\n        </section>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Feed;\r\n","import React, { Component } from 'react';\r\n\r\nimport Image from '../../../components/Image/Image';\r\nimport './SinglePost.css';\r\n\r\nclass SinglePost extends Component {\r\n  state = {\r\n    title: '',\r\n    author: '',\r\n    date: '',\r\n    image: '',\r\n    content: ''\r\n  };\r\n\r\n  componentDidMount() {\r\n    const postId = this.props.match.params.postId;\r\n    fetch('https://socialnetwork-backend.up.railway.app/feed/post/' + postId, {\r\n      headers: {\r\n        Authorization: 'Bearer ' + this.props.token\r\n      }\r\n    })\r\n      .then(res => {\r\n        if (res.status !== 200) {\r\n          throw new Error('Failed to fetch status');\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(resData => {\r\n        this.setState({\r\n          title: resData.post.title,\r\n          author: resData.post.creator.name,\r\n          image: 'https://socialnetwork-backend.up.railway.app/'+ resData.post.imageUrl,\r\n          date: new Date(resData.post.createdAt).toLocaleDateString('en-US'),\r\n          content: resData.post.content\r\n        });\r\n        console.log(\"url from backend: \", this.state.image);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"single-post\">\r\n        <h1>{this.state.title}</h1>\r\n        <h2>\r\n          Created on {this.state.date}\r\n        </h2>\r\n        <div className=\"single-post__image\">\r\n          <Image contain imageUrl={this.state.image} />\r\n        </div>\r\n        <p>{this.state.content}</p>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SinglePost;\r\n","import React from 'react';\r\n\r\nimport './Auth.css';\r\n\r\nconst auth = props => <section className=\"auth-form\">{props.children}</section>;\r\n\r\nexport default auth;\r\n","import React, { Component } from 'react';\r\n\r\nimport Input from '../../components/Form/Input/Input';\r\nimport Button from '../../components/Button/Button';\r\nimport { required, length, email } from '../../util/validators';\r\nimport Auth from './Auth';\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    loginForm: {\r\n      email: {\r\n        value: '',\r\n        valid: false,\r\n        touched: false,\r\n        validators: [required, email]\r\n      },\r\n      password: {\r\n        value: '',\r\n        valid: false,\r\n        touched: false,\r\n        validators: [required, length({ min: 5 })]\r\n      },\r\n      formIsValid: false\r\n    }\r\n  };\r\n\r\n  inputChangeHandler = (input, value) => {\r\n    this.setState(prevState => {\r\n      let isValid = true;\r\n      for (const validator of prevState.loginForm[input].validators) {\r\n        isValid = isValid && validator(value);\r\n      }\r\n      const updatedForm = {\r\n        ...prevState.loginForm,\r\n        [input]: {\r\n          ...prevState.loginForm[input],\r\n          valid: isValid,\r\n          value: value\r\n        }\r\n      };\r\n      let formIsValid = true;\r\n      for (const inputName in updatedForm) {\r\n        formIsValid = formIsValid && updatedForm[inputName].valid;\r\n      }\r\n      return {\r\n        loginForm: updatedForm,\r\n        formIsValid: formIsValid\r\n      };\r\n    });\r\n  };\r\n\r\n  inputBlurHandler = input => {\r\n    this.setState(prevState => {\r\n      return {\r\n        loginForm: {\r\n          ...prevState.loginForm,\r\n          [input]: {\r\n            ...prevState.loginForm[input],\r\n            touched: true\r\n          }\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Auth>\r\n        <form\r\n          onSubmit={e =>\r\n            this.props.onLogin(e, {\r\n              email: this.state.loginForm.email.value,\r\n              password: this.state.loginForm.password.value\r\n            })\r\n          }\r\n        >\r\n          <Input\r\n            id=\"email\"\r\n            label=\"Your E-Mail\"\r\n            type=\"email\"\r\n            control=\"input\"\r\n            onChange={this.inputChangeHandler}\r\n            onBlur={this.inputBlurHandler.bind(this, 'email')}\r\n            value={this.state.loginForm['email'].value}\r\n            valid={this.state.loginForm['email'].valid}\r\n            touched={this.state.loginForm['email'].touched}\r\n          />\r\n          <Input\r\n            id=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            control=\"input\"\r\n            onChange={this.inputChangeHandler}\r\n            onBlur={this.inputBlurHandler.bind(this, 'password')}\r\n            value={this.state.loginForm['password'].value}\r\n            valid={this.state.loginForm['password'].valid}\r\n            touched={this.state.loginForm['password'].touched}\r\n          />\r\n          <Button design=\"raised\" type=\"submit\" loading={this.props.loading}>\r\n            Login\r\n          </Button>\r\n        </form>\r\n      </Auth>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n","import React, { Component } from 'react';\r\n\r\nimport Input from '../../components/Form/Input/Input';\r\nimport Button from '../../components/Button/Button';\r\nimport { required, length, email } from '../../util/validators';\r\nimport Auth from './Auth';\r\n\r\nclass Signup extends Component {\r\n  state = {\r\n    signupForm: {\r\n      email: {\r\n        value: '',\r\n        valid: false,\r\n        touched: false,\r\n        validators: [required, email]\r\n      },\r\n      password: {\r\n        value: '',\r\n        valid: false,\r\n        touched: false,\r\n        validators: [required, length({ min: 5 })]\r\n      },\r\n      name: {\r\n        value: '',\r\n        valid: false,\r\n        touched: false,\r\n        validators: [required]\r\n      },\r\n      formIsValid: false\r\n    }\r\n  };\r\n\r\n  inputChangeHandler = (input, value) => {\r\n    this.setState(prevState => {\r\n      let isValid = true;\r\n      for (const validator of prevState.signupForm[input].validators) {\r\n        isValid = isValid && validator(value);\r\n      }\r\n      const updatedForm = {\r\n        ...prevState.signupForm,\r\n        [input]: {\r\n          ...prevState.signupForm[input],\r\n          valid: isValid,\r\n          value: value\r\n        }\r\n      };\r\n      let formIsValid = true;\r\n      for (const inputName in updatedForm) {\r\n        formIsValid = formIsValid && updatedForm[inputName].valid;\r\n      }\r\n      return {\r\n        signupForm: updatedForm,\r\n        formIsValid: formIsValid\r\n      };\r\n    });\r\n  };\r\n\r\n  inputBlurHandler = input => {\r\n    this.setState(prevState => {\r\n      return {\r\n        signupForm: {\r\n          ...prevState.signupForm,\r\n          [input]: {\r\n            ...prevState.signupForm[input],\r\n            touched: true\r\n          }\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Auth>\r\n        <form onSubmit={e => this.props.onSignup(e, this.state)}>\r\n          <Input\r\n            id=\"email\"\r\n            label=\"Your E-Mail\"\r\n            type=\"email\"\r\n            control=\"input\"\r\n            onChange={this.inputChangeHandler}\r\n            onBlur={this.inputBlurHandler.bind(this, 'email')}\r\n            value={this.state.signupForm['email'].value}\r\n            valid={this.state.signupForm['email'].valid}\r\n            touched={this.state.signupForm['email'].touched}\r\n          />\r\n          <Input\r\n            id=\"name\"\r\n            label=\"Your Name\"\r\n            type=\"text\"\r\n            control=\"input\"\r\n            onChange={this.inputChangeHandler}\r\n            onBlur={this.inputBlurHandler.bind(this, 'name')}\r\n            value={this.state.signupForm['name'].value}\r\n            valid={this.state.signupForm['name'].valid}\r\n            touched={this.state.signupForm['name'].touched}\r\n          />\r\n          <Input\r\n            id=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            control=\"input\"\r\n            onChange={this.inputChangeHandler}\r\n            onBlur={this.inputBlurHandler.bind(this, 'password')}\r\n            value={this.state.signupForm['password'].value}\r\n            valid={this.state.signupForm['password'].valid}\r\n            touched={this.state.signupForm['password'].touched}\r\n          />\r\n          <Button design=\"raised\" type=\"submit\" loading={this.props.loading}>\r\n            Signup\r\n          </Button>\r\n        </form>\r\n      </Auth>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Signup;\r\n","import React, { Component, Fragment } from 'react';\r\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom';\r\n\r\nimport Layout from './components/Layout/Layout';\r\nimport Backdrop from './components/Backdrop/Backdrop';\r\nimport Toolbar from './components/Toolbar/Toolbar';\r\nimport MainNavigation from './components/Navigation/MainNavigation/MainNavigation';\r\nimport MobileNavigation from './components/Navigation/MobileNavigation/MobileNavigation';\r\nimport ErrorHandler from './components/ErrorHandler/ErrorHandler';\r\nimport FeedPage from './pages/Feed/Feed';\r\nimport SinglePostPage from './pages/Feed/SinglePost/SinglePost';\r\nimport LoginPage from './pages/Auth/Login';\r\nimport SignupPage from './pages/Auth/Signup';\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    showBackdrop: false,\r\n    showMobileNav: false,\r\n    isAuth: false,\r\n    token: null,\r\n    userId: null,\r\n    authLoading: false,\r\n    error: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    const expiryDate = localStorage.getItem('expiryDate');\r\n    if (!token || !expiryDate) {\r\n      return;\r\n    }\r\n    if (new Date(expiryDate) <= new Date()) {\r\n      this.logoutHandler();\r\n      return;\r\n    }\r\n    const userId = localStorage.getItem('userId');\r\n    const remainingMilliseconds =\r\n      new Date(expiryDate).getTime() - new Date().getTime();\r\n    this.setState({ isAuth: true, token: token, userId: userId });\r\n    this.setAutoLogout(remainingMilliseconds);\r\n  }\r\n\r\n  mobileNavHandler = isOpen => {\r\n    this.setState({ showMobileNav: isOpen, showBackdrop: isOpen });\r\n  };\r\n\r\n  backdropClickHandler = () => {\r\n    this.setState({ showBackdrop: false, showMobileNav: false, error: null });\r\n  };\r\n\r\n  logoutHandler = () => {\r\n    this.setState({ isAuth: false, token: null });\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('expiryDate');\r\n    localStorage.removeItem('userId');\r\n  };\r\n\r\n  loginHandler = (event, authData) => {\r\n    event.preventDefault();\r\n    this.setState({ authLoading: true });\r\n    fetch('https://socialnetwork-backend.up.railway.app/auth/login',{\r\n        method: 'POST',\r\n        headers: {\r\n          'content-type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          email: authData.email,\r\n          password: authData.password,\r\n        })\r\n      })\r\n      .then(res => {\r\n        if (res.status === 422) {\r\n          throw new Error('Validation failed.');\r\n        }\r\n        if (res.status !== 200 && res.status !== 201) {\r\n          console.log('Error!');\r\n          throw new Error('Could not authenticate you!');\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(resData => {\r\n        console.log(resData);\r\n        this.setState({\r\n          isAuth: true,\r\n          token: resData.token,\r\n          authLoading: false,\r\n          userId: resData.userId\r\n        });\r\n        localStorage.setItem('token', resData.token);\r\n        localStorage.setItem('userId', resData.userId);\r\n        const remainingMilliseconds = 60 * 60 * 1000;\r\n        const expiryDate = new Date(\r\n          new Date().getTime() + remainingMilliseconds\r\n        );\r\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\r\n        this.setAutoLogout(remainingMilliseconds);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        this.setState({\r\n          isAuth: false,\r\n          authLoading: false,\r\n          error: err\r\n        });\r\n      });\r\n  };\r\n\r\n  signupHandler = (event, authData) => {\r\n    event.preventDefault();\r\n    this.setState({ authLoading: true });\r\n    fetch('https://socialnetwork-backend.up.railway.app/auth/signup', {\r\n      method: 'PUT',\r\n      headers: {\r\n        'content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        email: authData.signupForm.email.value,\r\n        password: authData.signupForm.password.value,\r\n        name: authData.signupForm.name.value\r\n      })\r\n    })\r\n      .then(res => {\r\n        if (res.status === 422) {\r\n          throw new Error(\r\n            \"Validation failed. Make sure the email address isn't used yet!\"\r\n          );\r\n        }\r\n        if (res.status !== 200 && res.status !== 201) {\r\n          console.log('Error!');\r\n          throw new Error('Creating a user failed!');\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(resData => {\r\n        console.log(resData);\r\n        this.setState({ isAuth: false, authLoading: false });\r\n        this.props.history.replace('/');\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        this.setState({\r\n          isAuth: false,\r\n          authLoading: false,\r\n          error: err\r\n        });\r\n      });\r\n  };\r\n\r\n  setAutoLogout = milliseconds => {\r\n    setTimeout(() => {\r\n      this.logoutHandler();\r\n    }, milliseconds);\r\n  };\r\n\r\n  errorHandler = () => {\r\n    this.setState({ error: null });\r\n  };\r\n\r\n  render() {\r\n    let routes = (\r\n      <Switch>\r\n        <Route\r\n          path=\"/\"\r\n          exact\r\n          render={props => (\r\n            <LoginPage\r\n              {...props}\r\n              onLogin={this.loginHandler}\r\n              loading={this.state.authLoading}\r\n            />\r\n          )}\r\n        />\r\n        <Route\r\n          path=\"/signup\"\r\n          exact\r\n          render={props => (\r\n            <SignupPage\r\n              {...props}\r\n              onSignup={this.signupHandler}\r\n              loading={this.state.authLoading}\r\n            />\r\n          )}\r\n        />\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    );\r\n    if (this.state.isAuth) {\r\n      routes = (\r\n        <Switch>\r\n          <Route\r\n            path=\"/\"\r\n            exact\r\n            render={props => (\r\n              <FeedPage userId={this.state.userId} token={this.state.token} />\r\n            )}\r\n          />\r\n          <Route\r\n            path=\"/:postId\"\r\n            render={props => (\r\n              <SinglePostPage\r\n                {...props}\r\n                userId={this.state.userId}\r\n                token={this.state.token}\r\n              />\r\n            )}\r\n          />\r\n          <Redirect to=\"/\" />\r\n        </Switch>\r\n      );\r\n    }\r\n    return (\r\n      <Fragment>\r\n        {this.state.showBackdrop && (\r\n          <Backdrop onClick={this.backdropClickHandler} />\r\n        )}\r\n        <ErrorHandler error={this.state.error} onHandle={this.errorHandler} />\r\n        <Layout\r\n          header={\r\n            <Toolbar>\r\n              <MainNavigation\r\n                onOpenMobileNav={this.mobileNavHandler.bind(this, true)}\r\n                onLogout={this.logoutHandler}\r\n                isAuth={this.state.isAuth}\r\n              />\r\n            </Toolbar>\r\n          }\r\n          mobileNav={\r\n            <MobileNavigation\r\n              open={this.state.showMobileNav}\r\n              mobile\r\n              onChooseItem={this.mobileNavHandler.bind(this, false)}\r\n              onLogout={this.logoutHandler}\r\n              isAuth={this.state.isAuth}\r\n            />\r\n          }\r\n        />\r\n        {routes}\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}